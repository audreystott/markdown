# Maali vs Spack

|                       |   Maali                                           |   Spack                                            |
|    ---------          | ---------                                         |   -------                                          |
| Installation          | `maali -t <package_name> -v <version_number>`     | `spack install <package_name>`                     |
|                       |                                                   | `@` is used to specify version <br>`spack install <package_name>@<version_number>`</br>|
|                       |                                                   | From source or binary cache                        |
|                       |                                                   | Dependencies can be indicated with `^`  <br>`spack install <package_name> ^<dependency_package_name>`</br>|
|                       |                                                   | MPI-dependent packages will build with `openmpi` "out-of-the-box" <br>Specify with `^` as a dependency if wanting to use other MPI implementation providers e.g. `mpich`,`openmpi` or `mvapich`.</br>|
|                       |                                                   | |
| Uninstalling          | `maali -u -t <package_name> -v <version_number>`  | Same syntax as how it was installed <br>`spack uninstall <package_name>` <br>`spack uninstall <package_name>@<version_number>` <br>`spack uninstall <package_name>`</br>|
| Compilers             | Different compilers depending on what is written in .cyg file for the package, e.g. GCC, GNU Make, etc                                                                              | Can specify which compiler with `%`  <br>`spack install <package_name> %<compiler_name>` <br>Compiler list can be searched <br>`spack compilers` <br>Different versions of compilers can also be installed <br>`spack install <compiler_name>@<version_number>` <br>The available compiler can be set to a specific version as default <br>`spack compiler add $(/home/spack/.spack/linux/compilers.yaml -i <compiler_name>@<version_number>` <br>Remove it without the location flag <br>`spack compiler remove <compiler_name>@<version_number>`</br>|
|                       |                                                   | Compiler flags `cppflags`, `cflags`, `cxxflags`, `fflags`, `ldflags`, and `ldlibs` can be added to the end of the install command <br>`spack install <package_name> cppflags=-03`</br>|
| CPU architecture      |                                                   | Parallel installation with number of jobs = number of cores on node (max 16), can be limited by setting `build_jobs: <number of cores>` in `config.yaml` file|
| GPU architecture      |                                                   |                                                    |
| User experience       | `module avail <package_name>`                     | As above for common commands <br>List all available or add more spec <br>`spack find` <br>`spack find <package_name>` <br>`spack find ^<dependency_package_name>` <br>`spack find <compiler_flag_name>=-<number>`</br>|
|                       |                                                   | `spack versions <package_name>`                    |
|                       |                                                   | To look up what is available to install <br>`spack list`  <br>`spack list <package_name>` <br>`spack list <part_of_package_name>-`</br>|
|                       | `module load <package_name>`                      |  `module load <package_name>` |
| System configuration  |                                                   | Packages are installed to `/home/spack/spack/opt/spack/`</br>| 
| Ease of use           | Maali uses single recipe files called Cygnet files for each package that then generates the corresponding module file | Spack generates non-hierachical module files written in TCL or hierachical module files written in Lua, and builds environment-modules and lmod as support tools. Module files are generated from: <br><br>1) `config.yaml` and `spack.yaml` files <br>2) information contained in the spack packages <br>3) a set of template files <br><br>By running `spack load <package_name> @<version_number>`, Spack automatically generates and loads the relevant module files <br><br>Both config files can be then edited for various purposes.<br>e.g. custom environment modifications, |
|                       | `module show <package_name>`                      | <br>`module show <package_name>`</br>                       |   